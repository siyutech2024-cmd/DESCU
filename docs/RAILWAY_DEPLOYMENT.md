# Railway è¯¦ç»†éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—æä¾›åœ¨ [Railway](https://railway.app/) ä¸Šéƒ¨ç½² DESCU åŽç«¯çš„è¯¦ç»†å›¾æ–‡æ­¥éª¤ã€‚

## ðŸ“‹ å‡†å¤‡å·¥ä½œ

1. **æ‹¥æœ‰ GitHub è´¦å·**: ä¸”å·²ç™»å½•ã€‚
2. **ä»£ç å·²æŽ¨é€**: ç¡®ä¿æœ€æ–°çš„ä»£ç å·²æŽ¨é€åˆ° GitHub ä»“åº“ `siyutech2024-cmd/DESCU`ã€‚
3. **å‡†å¤‡çŽ¯å¢ƒå˜é‡**:
   - `SUPABASE_URL`
   - `SUPABASE_SERVICE_ROLE_KEY`
   - `GEMINI_API_KEY`

---

## ðŸš€ æ–¹å¼ä¸€ï¼šé€šè¿‡ç½‘é¡µæŽ§åˆ¶å°éƒ¨ç½² (æŽ¨èæ–°æ‰‹)

### 1. åˆ›å»ºé¡¹ç›®
1. è®¿é—® [Railway Dashboard](https://railway.app/dashboard)ã€‚
2. ç‚¹å‡»å³ä¸Šè§’çš„ **"New Project"**ã€‚
3. é€‰æ‹© **"Deploy from GitHub repo"**ã€‚
4. åœ¨å¼¹å‡ºçš„åˆ—è¡¨ä¸­é€‰æ‹©ä½ çš„ä»“åº“ `siyutech2024-cmd/DESCU`ã€‚
5. ç‚¹å‡» **"Deploy Now"**ã€‚

### 2. å…³é”®é…ç½® (Root Directory)
âš ï¸ **éžå¸¸é‡è¦**ï¼šç”±äºŽåŽç«¯ä»£ç åœ¨ `server` æ–‡ä»¶å¤¹å†…ï¼Œå¿…é¡»è®¾ç½®æ ¹ç›®å½•ã€‚

1. é¡¹ç›®åˆ›å»ºåŽï¼Œç‚¹å‡»å¡ç‰‡ä¸­çš„ **DESCU** æœåŠ¡ã€‚
2. è¿›å…¥ **"Settings"** é€‰é¡¹å¡ã€‚
3. å‘ä¸‹æ»šåŠ¨æ‰¾åˆ° **"Root Directory"** éƒ¨åˆ†ã€‚
4. è¾“å…¥ `/server` å¹¶ç‚¹å‡»ä¿å­˜/æ‰“é’©ã€‚
5. Railway æ£€æµ‹åˆ°æ›´æ”¹åŽä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ã€‚

### 3. é…ç½®å¯åŠ¨å‘½ä»¤
åœ¨ **"Settings"** é€‰é¡¹å¡ä¸‹çš„ **"Build & Deploy"** éƒ¨åˆ†ï¼Œç¡®è®¤ä»¥ä¸‹è®¾ç½®ï¼ˆé€šå¸¸ä¼šè‡ªåŠ¨æ£€æµ‹ï¼Œä½†è¯·æ ¸å¯¹ï¼‰ï¼š

- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm start`
- **Watch Paths**: `/server/**` (å¯é€‰ï¼Œç”¨äºŽè§¦å‘é‡æ–°éƒ¨ç½²)

### 4. è®¾ç½®çŽ¯å¢ƒå˜é‡
1. åˆ‡æ¢åˆ° **"Variables"** é€‰é¡¹å¡ã€‚
2. ç‚¹å‡» **"New Variable"**ï¼Œé€ä¸ªæ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

| å˜é‡å | å€¼ (ç¤ºä¾‹) | è¯´æ˜Ž |
| :--- | :--- | :--- |
| `PORT` | `3000` | æœåŠ¡ç«¯å£ |
| `GEMINI_API_KEY` | `AIza...` | Google AI Key |
| `SUPABASE_URL` | `https://xxxx.supabase.co` | æ•°æ®åº“ URL |
| `SUPABASE_SERVICE_ROLE_KEY` | `eyJh...` | åŽç«¯ä¸“ç”¨å¯†é’¥ |

æ·»åŠ å®ŒæˆåŽï¼ŒRailway ä¼šè‡ªåŠ¨è§¦å‘é‡æ–°éƒ¨ç½²ã€‚

### 5. ç”Ÿæˆå¹¶èŽ·å–åŸŸå
1. åˆ‡æ¢åˆ° **"Settings"** é€‰é¡¹å¡ã€‚
2. æ‰¾åˆ° **"Networking"** -> **"Public Networking"**ã€‚
3. ç‚¹å‡» **"Generate Domain"**ã€‚
4. å¤åˆ¶ç”Ÿæˆçš„åŸŸå (ä¾‹å¦‚ `https://descu-production.up.railway.app`)ã€‚
5. **åŽç»­æ­¥éª¤**: å°†æ­¤åŸŸåå¡«å…¥å‰ç«¯ Vercel çš„çŽ¯å¢ƒå˜é‡ `VITE_API_URL` ä¸­ã€‚

---

## ðŸ’» æ–¹å¼äºŒï¼šä½¿ç”¨ Railway CLI (æžå®¢é¦–é€‰)

### 1. å®‰è£… CLI
```bash
npm i -g @railway/cli
```

### 2. ç™»å½•
```bash
railway login
# æµè§ˆå™¨ä¼šè‡ªåŠ¨å¼¹å‡ºå¹¶åœ¨è®¤è¯åŽå…³é—­
```

### 3. åˆå§‹åŒ–å¹¶é“¾æŽ¥é¡¹ç›®
åœ¨é¡¹ç›®æ ¹ç›®å½• (`/Users/ishak/Downloads/descu---äºŒæ‰‹æ™ºé€‰`) æ‰§è¡Œï¼š

```bash
railway init
# é€‰æ‹© "Empty Project" æˆ–é“¾æŽ¥åˆ°çŽ°æœ‰é¡¹ç›®
```

### 4. ä¸Šä¼ ä¸Žéƒ¨ç½²
```bash
# è‡ªåŠ¨è¯†åˆ«å¹¶éƒ¨ç½²
railway up
```
å¦‚æžœæ˜¯é¦–æ¬¡ä¸Šä¼ ï¼ŒCLI å¯èƒ½ä¼šè¯¢é—®ä¸€äº›é…ç½®ï¼Œç¡®ä¿æŒ‡å‘ `server` ç›®å½•ã€‚

### 5. è®¾ç½®çŽ¯å¢ƒå˜é‡ (å‘½ä»¤è¡Œæ–¹å¼)
```bash
railway variables --set PORT=3000
railway variables --set SUPABASE_URL=https://...
# ä¾æ­¤ç±»æŽ¨
```

---

## ðŸ›  å¸¸è§é—®é¢˜æŽ’æŸ¥

### Q: éƒ¨ç½²å¤±è´¥ï¼Œæ—¥å¿—æ˜¾ç¤º "Backend folder not found" æˆ– "package.json missing"
**A**: 99% æ˜¯å› ä¸ºæ²¡æœ‰è®¾ç½® **Root Directory**ã€‚
è¯·å›žåˆ° Settings -> Root Directoryï¼Œç¡®ä¿å¡«å†™ä¸º `/server`ã€‚

### Q: éƒ¨ç½²æˆåŠŸï¼Œä½†è®¿é—® API æŠ¥ 500 é”™è¯¯
**A**: æ£€æŸ¥çŽ¯å¢ƒå˜é‡ã€‚æŸ¥çœ‹ `View Logs`ï¼Œå¦‚æžœçœ‹åˆ° "Missing SUPABASE_URL" ç­‰é”™è¯¯ï¼Œè¯´æ˜Žå˜é‡æœªæ­£ç¡®è®¾ç½®ã€‚

### Q: æž„å»ºå¤ªæ…¢æˆ–è¶…æ—¶
**A**: åœ¨ Settings ä¸­ï¼Œç¡®ä¿ Railway çš„ Plan æ˜¯ Hobby æˆ– Pro (å¦‚æžœæ˜¯ Free tier å¯èƒ½ä¼šæœ‰é™åˆ¶)ï¼Œæˆ–è€…æ£€æŸ¥ `package-lock.json` æ˜¯å¦å†²çªã€‚

### Q: å¦‚ä½•æŸ¥çœ‹å®žæ—¶æ—¥å¿—ï¼Ÿ
**A**: ç‚¹å‡»æœåŠ¡å¡ç‰‡ -> **"Deployments"** -> ç‚¹å‡»å½“å‰æœ€æ–°çš„ä¸€æ¬¡éƒ¨ç½² -> **"View Logs"**ã€‚
